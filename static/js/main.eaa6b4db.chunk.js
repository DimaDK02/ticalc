(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n.p+"static/media/logo.4d10b61e.png"},40:function(e,t,n){e.exports=n(92)},68:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(23),o=n.n(i),c=n(38),u=n(16),s=n.n(u),l=n(17),d=n.n(l),h=n(3),p=n.n(h),m=n(4),v=n(5),f=n(7),E=n(6),k=n(8),y=n(13),w=n(1),g=(n(29),n(18)),S=n(25),C=n(24),b=n.n(C),x=n(35),R=n.n(x);var P=function(){return Object(w.platform)()===w.IOS?r.a.createElement(R.a,null):r.a.createElement(b.a,null)};function A(e){var t=e.panelHeaderProps,n=e.onBackButtonClick,a=e.text;return r.a.createElement(w.PanelHeader,Object.assign({},t,{left:r.a.createElement(w.HeaderButton,{onClick:n},r.a.createElement(P,null))}),a)}A.defaultProps={panelHeaderProps:{}};var I=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).notFoundComponent=r.a.createElement(w.Div,{style:{textAlign:"center"}},r.a.createElement("p",null,"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")),n.state={searchText:""},n}return Object(k.a)(t,e),Object(v.a)(t,[{key:"onSearchChange",value:function(e){this.setState({searchText:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,a=t.backClickHandler,i=t.header,o=t.onSelect;return r.a.createElement(w.Panel,{id:n},r.a.createElement(A,{onBackButtonClick:function(){return a()},text:i,panelHeaderProps:{noShadow:!0}}),r.a.createElement(w.Search,{onChange:function(){return e.onSearchChange()}}),this.items.length>0&&r.a.createElement(w.List,null,this.items.map(function(e){return r.a.createElement(w.Cell,{key:e.id,onClick:function(){a(),o(e)}},e.value)})),!this.items.length&&this.notFoundComponent)}},{key:"items",get:function(){var e=this.state.searchText,t=this.props.items,n=e.toLocaleLowerCase();return t.filter(function(e){return-1!==e.value.toLocaleLowerCase().indexOf(n)})}}]),t}(r.a.Component);n(68);function O(e){var t=e.text,n=e.value,a=e.additionalClassesAsStr;return r.a.createElement(j,{text:t,value:"".concat(n," \u0440\u0443\u0431"),additionalClassesAsStr:"money ".concat(a||"")})}function T(e){var t=e.text,n=e.value;return r.a.createElement(O,{text:t,value:n,additionalClassesAsStr:"summary"})}function j(e){var t=e.text,n=e.value,a=e.onClick,i=e.additionalClassesAsStr;return r.a.createElement(w.Cell,{onClick:a&&function(){return a()}},r.a.createElement("div",{className:"indicator ".concat(i||"")},r.a.createElement("div",{className:"text-wrapper"},r.a.createElement("span",null,t)),r.a.createElement("div",{className:"value-wrapper"},r.a.createElement("span",{className:"value"},n))))}O.defaultProps={additionalClassesAsStr:""},j.defaultProps={onClick:function(){},additionalClassesAsStr:""};var M=n(26),V=n(19),H=n.n(V);function N(e){return Number.parseInt(e,10)||0}function _(e){return"---"===e?"":e}function L(e){var t={works:[],materials:[]};return e.forEach(function(e){var n=function(e){return{name:_(e.MATERIAL_NAME),price:N(e.MATERIAL_PRICE)}}(e);n.name&&t.materials.push(n);var a=function(e){return{name:_(e.SERVICE_NAME),price:N(e.SERVICE_PRICE)}}(e);a.name&&t.works.push(a)}),t}function B(e,t){return e.type===t}function G(e){return new Promise(function(t,n){s.a.subscribe(function(a){var r=a.detail;B(r,"".concat(e,"Result"))?t(r.data):B(r,"".concat(e,"Failed"))&&n(r.data)}),s.a.send(e,{})})}function q(e){return Object.entries(e).map(function(e){var t=Object(M.a)(e,2),n=t[0],a=t[1];return{id:parseInt(n,10),value:a}})}function W(e,t){var n=new URLSearchParams;return Object.entries(t).forEach(function(e){var t=Object(M.a)(e,2),a=t[0],r=t[1];n.append(a,r)}),H.a.post(e,n)}function F(e){return new Promise(function(t){setTimeout(t,1e3*e)})}var U=Boolean(parseInt("0",10)),D='\n    <noscript>\n        <div><img src="https://mc.yandex.ru/watch/50376901" style="position:absolute; left:-9999px;" alt="" /></div>\n    </noscript>\n';function J(e){if(U)try{window.yaCounter50376901.reachGoal(e)}catch(t){console.warn("Tried to reach goal ".concat(e,", but Yandex.Metrika is blocked or removed"))}}var z,K={67223:"1.6\u043b., \u0431\u0435\u043d\u0437\u0438\u043d, 117 \u043b.\u0441., CVT",67271:"1.6\u043b., \u0442\u0443\u0440\u0431\u043e, \u0431\u0435\u043d\u0437\u0438\u043d, 200 \u043b.\u0441., 4\u04452 \u041c\u041a\u041f\u041f",67272:"1.6\u043b., \u0431\u0435\u043d\u0437\u0438\u043d, 117 \u043b.\u0441., \u041c\u041a\u041f\u041f",67273:"1.6\u043b., \u0442\u0443\u0440\u0431\u043e, \u0431\u0435\u043d\u0437\u0438\u043d, 200 \u043b.\u0441., 4\u04454 CVT"},Y=[{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u043c\u043e\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u043c\u0430\u0441\u043b\u0430 (\u0431\u0435\u0437 \u0441\u043d\u044f\u0442\u0438\u044f \u0437\u0430\u0449\u0438\u0442\u044b \u0414\u0412\u0421)",SERVICE_PRICE:"600",MATERIAL_NAME:"\u041c\u043e\u0442\u043e\u0440\u043d\u043e\u0435 \u043c\u0430\u0441\u043b\u043e 5\u043b.",MATERIAL_PRICE:"2250"},{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u043c\u0430\u0441\u043b\u044f\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430 (\u0431\u0435\u0437 \u0441\u043d\u044f\u0442\u0438\u044f \u0437\u0430\u0449\u0438\u0442\u044b \u0414\u0412\u0421)",SERVICE_PRICE:"---",MATERIAL_NAME:"\u041c\u0430\u0441\u043b\u044f\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440",MATERIAL_PRICE:"450"},{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u043f\u0440\u043e\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u043b\u0438\u0432\u043d\u043e\u0439 \u043f\u0440\u043e\u0431\u043a\u0438",SERVICE_PRICE:"---",MATERIAL_NAME:"\u041f\u0440\u043e\u043a\u043b\u0430\u0434\u043a\u0430 \u0441\u043b\u0438\u0432\u043d\u043e\u0439 \u043f\u0440\u043e\u0431\u043a\u0438",MATERIAL_PRICE:"50"},{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u0432\u043e\u0437\u0434\u0443\u0448\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430",SERVICE_PRICE:"300",MATERIAL_NAME:"\u0412\u043e\u0437\u0434\u0443\u0448\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440",MATERIAL_PRICE:"450"},{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u0438 \u0441\u0430\u043b\u043e\u043d\u0430",SERVICE_PRICE:"400",MATERIAL_NAME:"\u0424\u0438\u043b\u044c\u0442\u0440 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u0438 \u0441\u0430\u043b\u043e\u043d\u0430",MATERIAL_PRICE:"400"},{SERVICE_NAME:"C\u043c\u0430\u0437\u043a\u0430 \u043f\u0435\u0442\u0435\u043b\u044c, \u0437\u0430\u043c\u043a\u043e\u0432",SERVICE_PRICE:"100",MATERIAL_NAME:"---",MATERIAL_PRICE:"---"},{SERVICE_NAME:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 (\u0432\u0441\u0435\u0445 \u0441\u0438\u0441\u0442\u0435\u043c, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u043d\u0443\u044e, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u0440\u043e\u0441\u0441\u0435\u043b\u044c\u043d\u043e\u0439 \u0437\u0430\u0441\u043b\u043e\u043d\u043a\u0438)",SERVICE_PRICE:"1490",MATERIAL_NAME:"---",MATERIAL_PRICE:"---"}],Q=[{id:43,value:"Almera Classic (2006-2013)"},{id:44,value:"Almera New (\u0441 2012)"},{id:45,value:"Juke (\u0441 2011)"},{id:46,value:"Micra (\u0441 2002)"},{id:47,value:"Murano (2008-2015)"},{id:48,value:"Murano (\u0441 2015)"},{id:49,value:"Navara (\u0441 2010)"},{id:50,value:"Note (2006-2014)"},{id:51,value:"Pathfinder (2010-2013)"},{id:52,value:"Pathfinder (\u0441 2013)"},{id:53,value:"Qashqai (2006-2013)"},{id:54,value:"Qashqai (\u0441 2013)"},{id:55,value:"Teana (2008-2013)"},{id:56,value:"Teana (\u0441 2013)"},{id:57,value:"Terrano (\u0441 2013)"},{id:58,value:"Tiida (2004-2015)"},{id:60,value:"X-Trail (2010-2014)"},{id:61,value:"X-Trail (\u0441 2014)"},{id:62,value:"Sentra (\u0441 2014)"}],X=[{id:1,value:"15000 \u0438\u043b\u0438 1 \u0433\u043e\u0434"},{id:2,value:"30000 \u0438\u043b\u0438 2 \u0433\u043e\u0434\u0430"},{id:3,value:"45000 \u0438\u043b\u0438 3 \u0433\u043e\u0434\u0430"},{id:4,value:"60000 \u0438\u043b\u0438 4 \u0433\u043e\u0434\u0430"},{id:5,value:"75000 \u0438\u043b\u0438 5 \u043b\u0435\u0442"},{id:6,value:"90000 \u0438\u043b\u0438 6 \u043b\u0435\u0442"},{id:7,value:"105000 \u0438\u043b\u0438 7 \u043b\u0435\u0442"},{id:8,value:"120000 \u0438\u043b\u0438 8 \u043b\u0435\u0442"},{id:9,value:"135000 \u0438\u043b\u0438 9 \u043b\u0435\u0442"},{id:10,value:"150000 \u0438\u043b\u0438 10 \u043b\u0435\u0442"}],$={calculationResults:{status:"notSelected",works:[],materials:[]},popout:null};function Z(){window.history.back()}function ee(e){return{id:e.id,text:e.value}}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(y.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=4;break}return e.next=3,W("/ajax/model.php",{ID:t});case 3:return e.abrupt("return",e.sent.data);case 4:return e.next=6,F(.2);case 6:return e.abrupt("return",K);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t,n){return re.apply(this,arguments)}function re(){return(re=Object(y.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=4;break}return e.next=3,W("/ajax/to.php",{SECTION:t,TIME:a,AUTO:n});case 3:return e.abrupt("return",e.sent.data);case 4:return e.next=6,F(.5);case 6:return e.abrupt("return",Y);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}$=Object(S.a)({},$,{model:{id:0,text:z="\u0412\u044b\u0431\u0440\u0430\u0442\u044c"},modification:{id:0,text:z},oldness:{id:0,text:z}});var ie=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).ctaText="\u041e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u044f\u0432\u043a\u0443, \u043d\u0430\u0448\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u0441\u0432\u044f\u0436\u0443\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u043d\u0430 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f Nissan",n.models=Q,n.modifications=[],n.oldnesses=X,n.headerText="\u0420\u0430\u0441\u0447\u0435\u0442 \u0422\u041e \u041d\u0438\u0441\u0441\u0430\u043d",n.onCtaClick=function(){var e=n.props.onCtaClick;J("open-send-request"),e()},n.ctaButton=r.a.createElement(w.Button,{align:"center",stretched:!0,size:"l",onClick:n.onCtaClick},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"),n.ctaComponent=r.a.createElement(w.Div,null,r.a.createElement("p",null,n.ctaText),n.ctaButton),n.getPanelHeader=function(){var e=n.props.onBack;return r.a.createElement(A,{text:n.headerText,onBackButtonClick:function(){return e()}})},n.state=$;var a=n.props.id;return $.activePanel="".concat(a,"main"),window.onpopstate=function(){return n.onPopHistoryState()},window.history.replaceState({},"","#".concat(a,"/").concat(a,"main")),n}return Object(k.a)(t,e),Object(v.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.state,t=e.calculationResults,n=e.model,a=e.modification,r=e.oldness;window.onpopstate=window.basePopHistoryStateHandler,window.calculationResults=t,window.input={model:n,modification:a,oldness:r}}},{key:"onPopHistoryState",value:function(){var e=window.location.hash;e.includes("home")?this.viewPopStateHandler():window.basePopHistoryStateHandler()}},{key:"getModelSelectIndicator",value:function(){var e=this,t=this.state.model;return r.a.createElement(j,{text:"\u041c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e",value:t.text,onClick:function(){return e.changePanelAndPushHistoryState("chooseModel")}})}},{key:"getModificationSelectIndicator",value:function(){var e=this,t=this.state.modification;return r.a.createElement(j,{text:"\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f",value:t.text,onClick:function(){return e.changePanelAndPushHistoryState("chooseModification")}})}},{key:"getOldnessSelectIndicator",value:function(){var e=this,t=this.state.oldness;return r.a.createElement(j,{text:"\u041f\u0440\u043e\u0431\u0435\u0433 \u0438\u043b\u0438 \u0432\u0440\u0435\u043c\u044f",value:t.text,onClick:function(){return e.changePanelAndPushHistoryState("chooseOldness")}})}},{key:"getSelectIndicatorList",value:function(){return r.a.createElement(w.List,null,this.getModelSelectIndicator(),this.getModificationSelectIndicator(),this.getOldnessSelectIndicator())}},{key:"getCalculationSelectGroup",value:function(){return r.a.createElement(w.Group,null,r.a.createElement(w.Header,null,"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0432\u0430\u0448\u0435\u0433\u043e Nissan:"),this.getSelectIndicatorList())}},{key:"getResultWorkGroup",value:function(){var e=this.state.calculationResults;return r.a.createElement(w.Group,{title:"\u0420\u0430\u0431\u043e\u0442\u044b"},e.works.map(function(e){var t=e.name,n=e.price;return r.a.createElement(O,{text:t,value:n,key:t})}),r.a.createElement(T,{text:"\u0412\u0441\u0435\u0433\u043e \u043f\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043c",value:this.getSummaryValue("works")}))}},{key:"getResultMaterialGroup",value:function(){var e=this.state.calculationResults;return r.a.createElement(w.Group,{title:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"},e.materials.map(function(e){var t=e.name,n=e.price;return r.a.createElement(O,{text:t,value:n,key:t})}),r.a.createElement(T,{text:"\u0412\u0441\u0435\u0433\u043e \u043f\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c",value:this.getSummaryValue("materials")}))}},{key:"getSummaryValue",value:function(e){return this.state.calculationResults[e].reduce(function(e,t){return e+t.price},0)}},{key:"getResultSummaryGroup",value:function(){return r.a.createElement(w.Group,null,r.a.createElement(T,{text:"\u0418\u0442\u043e\u0433\u043e",value:this.getSummaryValue("works")+this.getSummaryValue("materials")}))}},{key:"getCalculationResultGroups",value:function(){return r.a.createElement("div",null,"ready"===this.resultsStatus&&r.a.createElement("div",null,this.getResultWorkGroup(),this.getResultMaterialGroup(),this.getResultSummaryGroup()))}},{key:"setSelectValueAndTryToCalculateResults",value:function(e,t){this.setState(Object(g.a)({},e,ee(t)),this.tryToCalculateResults)}},{key:"setLoadingStatus",value:function(){this.setState(function(e){return Object.assign(e.calculationResults,{status:"loading"}),e})}},{key:"getSelectedOldnessId",value:function(){return this.state.oldness.id}},{key:"getSelectedModificationId",value:function(){return this.state.modification.id}},{key:"getSelectedModelId",value:function(){return this.state.model.id}},{key:"getCalculationResults",value:function(){return{notSelected:null,loading:r.a.createElement(w.ScreenSpinner,null),ready:this.getCalculationResultGroups()}[this.resultsStatus]}},{key:"setModifications",value:function(){var e=Object(y.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(t);case 3:n=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:this.modifications=q(n),this.setState({modification:ee(this.modifications[0])});case 10:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setCalculationResults",value:function(e){this.setState({calculationResults:Object(S.a)({status:"ready"},e)})}},{key:"removeSpinner",value:function(){this.setState({popout:null})}},{key:"showSpinner",value:function(){this.setState({popout:r.a.createElement(w.ScreenSpinner,null)})}},{key:"allSelected",value:function(){return this.getSelectedModelId()&&this.getSelectedModificationId()&&this.getSelectedOldnessId()}},{key:"changePanel",value:function(e){this.setState({activePanel:e})}},{key:"calculateResults",value:function(){var e=Object(y.a)(p.a.mark(function e(){var t,n,a,r,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.model,a=t.modification,r=t.oldness,this.setLoadingStatus(),e.prev=2,e.next=5,ae(n.id,a.id,r.id);case 5:i=e.sent,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:i=L(i),this.setCalculationResults(i);case 12:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"tryToCalculateResults",value:function(){var e=Object(y.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.allSelected()){e.next=3;break}return e.next=3,this.calculateResults();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetModification",value:function(){this.setState({modification:{id:0,text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"}})}},{key:"changePanelAndPushHistoryState",value:function(e){var t;t="#home/".concat(e),window.history.pushState({},"",t),this.changePanel(e)}},{key:"viewPopStateHandler",value:function(){var e=window.location.hash,t=e.split("/",2)[1];this.changePanel(t)}},{key:"render",value:function(){var e=this,t=this.props.id,n=this.state,a=n.activePanel,i=n.popout,o="".concat(t,"main");return r.a.createElement(w.View,{id:t,activePanel:a,header:!0,popout:i},r.a.createElement(w.Panel,{id:o},this.getPanelHeader(),this.getCalculationSelectGroup(),this.getCalculationResults(),this.ctaComponent),r.a.createElement(I,{id:"chooseModel",backClickHandler:function(){return Z()},header:"\u041c\u043e\u0434\u0435\u043b\u044c",items:this.models,onSelect:function(){var t=Object(y.a)(p.a.mark(function t(n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.showSpinner(),J("selected-model"),e.resetModification(),t.next=5,e.setModifications(n.id);case 5:e.setSelectValueAndTryToCalculateResults("model",n),e.removeSpinner();case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement(I,{id:"chooseModification",backClickHandler:function(){return Z()},header:"\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f",items:this.modifications,onSelect:function(t){J("selected-modification"),e.setSelectValueAndTryToCalculateResults("modification",t)}}),r.a.createElement(I,{id:"chooseOldness",backClickHandler:function(){return Z()},header:"\u041f\u0440\u043e\u0431\u0435\u0433 \u0438\u043b\u0438 \u0432\u0440\u0435\u043c\u044f",items:this.oldnesses,onSelect:function(t){J("selected-oldness"),e.setSelectValueAndTryToCalculateResults("oldness",t)}}))}},{key:"resultsStatus",get:function(){return this.state.calculationResults.status}}]),t}(r.a.Component),oe=(n(88),n(39));function ce(e){return new oe.a("RU").input(e)}function ue(e){return e.replace(/[^0-9]/g,"")}var se=function(e){function t(e){var n;Object(m.a)(this,t);var a=(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).props.value;return a=a||"",n.state={value:a},n}return Object(k.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.value;e.value!==t&&this.changeValue(t)}},{key:"onChange",value:function(e){var t=e.target.value;this.changeValue(t)}},{key:"changeValue",value:function(e){var t=this.props.onChange;if(function(e){return ue(e).length<=11}(e)){var n=ce(e);this.shouldChangeToFormatted(n,e)?(this.setState({value:n}),t(function(e){return"+".concat(ue(e))}(e))):this.setState({value:e})}}},{key:"shouldChangeToFormatted",value:function(e,t){var n=this.state.value;return!(e.length===n.length&&t.length<e.length)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClick,a=t.className,i=t.placeholder,o=this.state.value;return r.a.createElement(w.Input,{type:"tel",placeholder:ce(i),onChange:function(t){return e.onChange(t)},value:o,className:a,onClick:function(e){return n(e)}})}}]),t}(r.a.Component);se.defaultProps={placeholder:"",value:"",className:""};var le=se,de={name:"",phone:"",phoneNotValid:!1,popout:null};function he(e){return Boolean(function(e){return e.replace(/[^0-9]/g,"")}(e))}function pe(e){return"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"===e?"":e}function me(e,t){var n={model:pe(window.input.model.text),modification:pe(window.input.modification.text),oldness:pe(window.input.oldness.text)},a=n.model,r=n.modification,i=n.oldness,o={works:JSON.stringify(window.calculationResults.works),materials:JSON.stringify(window.calculationResults.materials)},c=o.works,u=o.materials;return H.a.get("request.php",{params:{model:a,modification:r,oldness:i,works:c,materials:u,name:e,phone:t}})}var ve=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).sendButton=r.a.createElement(w.Button,{stretched:!0,size:"l",onClick:function(){return n.validateAndShowErrorsAndSendForm()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"),n.getPanelHeader=function(){var e=n.props.onBack;return r.a.createElement(A,{onBackButtonClick:e,text:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"})};var a=n.props.username;return n.state=de,n.state.name=a,n.requestedPhone=!1,n}return Object(k.a)(t,e),Object(v.a)(t,[{key:"componentWillUnmount",value:function(){de=this.state}},{key:"onPhoneInputClick",value:function(){var e=Object(y.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.requestedPhone){e.next=7;break}return this.requestedPhone=!0,e.next=4,G("VKWebAppGetPhoneNumber");case 4:t=e.sent,n=t.phone_number,this.setState({phone:n});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getForm",value:function(){return r.a.createElement(w.Group,null,this.getManualForm())}},{key:"getManualForm",value:function(){return r.a.createElement(w.Div,null,r.a.createElement(w.Cell,null,this.getNameComponent()),r.a.createElement(w.Cell,null,this.getPhoneComponent()),r.a.createElement(w.Cell,null,this.sendButton))}},{key:"getNameComponent",value:function(){var e=this,t=this.state.name;return r.a.createElement("div",null,r.a.createElement("span",null,"\u0418\u043c\u044f"),r.a.createElement(w.Input,{type:"text",placeholder:"\u0418\u0432\u0430\u043d",value:t,onChange:function(t){return e.setState({name:t.target.value})}}))}},{key:"getPhoneComponent",value:function(){var e=this,t=this.state,n=t.phone,a=t.phoneNotValid;return r.a.createElement("div",null,r.a.createElement("span",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),r.a.createElement(le,{placeholder:"+79211234567",value:n,onChange:function(t){return e.setState({phoneNotValid:!1}),e.setState({phone:t})},onClick:function(){return e.onPhoneInputClick()}}),a&&r.a.createElement("p",{className:"error-hint"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"))}},{key:"showSpinner",value:function(){this.setState({popout:r.a.createElement(w.ScreenSpinner,null)})}},{key:"hideSpinner",value:function(){this.setState({popout:null})}},{key:"doPostRequestTasks",value:function(){var e=this.props.onSentRequest;this.hideSpinner(),e()}},{key:"validateAndShowErrorsAndSendForm",value:function(){var e=Object(y.a)(p.a.mark(function e(){var t,n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.name,!he(a=t.phone)){e.next=9;break}return this.showSpinner(),e.next=5,me(n,a);case 5:J("sent-manual-request"),this.doPostRequestTasks(),e.next=10;break;case 9:this.setState({phoneNotValid:!0});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.id,t=this.state.popout,n="".concat(e,"main");return r.a.createElement(w.View,{id:e,activePanel:n,header:!0,popout:t},r.a.createElement(w.Panel,{id:n},this.getPanelHeader(),this.getForm()))}}]),t}(a.Component),fe=n(37),Ee=n.n(fe);n(89);var ke=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).headerText="\u0420\u0430\u0441\u0447\u0435\u0442 \u0422\u041e \u041d\u0438\u0441\u0441\u0430\u043d \u0432 \u0421\u041f\u0431",n.onGoHome=function(){J("open-home"),(0,n.props.onGoHome)()};var a=n.props.id;return n.state={activePanel:"".concat(a,"main")},n}return Object(k.a)(t,e),Object(v.a)(t,[{key:"getText",value:function(){var e,t=this.props.username;return e=t?"".concat(t,", \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435"):"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435",e+=" \u0441\u0432\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c Nissan \u0438 \u0443\u0437\u043d\u0430\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u043f\u0440\u043e\u0431\u0435\u0433\u0443 \u0438\u043b\u0438 \u0433\u043e\u0434\u0443",r.a.createElement("p",null,e)}},{key:"getGreeting",value:function(){var e=this.props.username,t=e?"".concat("\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435",", ").concat(e,"!"):"".concat("\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435","!");return r.a.createElement("p",null,t," \u0412\u044b \u0438\u0437 \u0421\u041f\u0431, \u0438 \u0443 \u0432\u0430\u0441 \u041d\u0438\u0441\u0441\u0430\u043d?")}},{key:"render",value:function(){var e=this.props.id,t=this.state.activePanel,n="".concat(e,"main");return r.a.createElement(w.View,{id:e,activePanel:t},r.a.createElement(w.Panel,{id:n},r.a.createElement(w.PanelHeader,null,this.headerText),r.a.createElement(w.Group,null,r.a.createElement(w.Div,null,r.a.createElement("div",{className:"centerring-wrapper"},r.a.createElement("img",{src:Ee.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u042f \u0421\u0435\u0440\u0432\u0438\u0441"})),r.a.createElement("div",null,this.getGreeting(),this.getText()),r.a.createElement(w.Button,{stretched:!0,size:"xl",onClick:this.onGoHome},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0422\u041e")))))}}]),t}(r.a.Component),ye=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={error:null},n}return Object(k.a)(t,e),Object(v.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),d.a.captureException(e,{extra:t})}},{key:"render",value:function(){var e=this.state.error,t=this.props.children;return e?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :("),r.a.createElement("p",null,"\u041d\u0430\u0448\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0443\u0436\u0435 \u0440\u0435\u0448\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443")):t}}]),t}(r.a.Component),we=(n(90),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onGoToPublic=function(){return J("open-vk-public"),!0},n}return Object(k.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.onBack,a="".concat(t,"main");return r.a.createElement(w.View,{id:t,activePanel:a},r.a.createElement(w.Panel,{id:a},r.a.createElement(A,{onBackButtonClick:function(){return n()},text:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e"}),r.a.createElement(w.Group,null,r.a.createElement(w.Cell,{multiline:!0},r.a.createElement("div",null,"\u0421\u043f\u0430\u0441\u0438\u0431\u043e!"),r.a.createElement("div",null,"\u041d\u0430\u0448 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0412\u0430\u043c\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f.")),r.a.createElement(w.Cell,{multiline:!0},r.a.createElement("span",{className:"thank-you-view__visit-group-text"},"\u0410 \u043f\u043e\u043a\u0430 \u0437\u0430\u0439\u0434\u0438\u0442\u0435 \u0432 \u043d\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"),r.a.createElement("a",{href:"//vk.com/ya.service.nissan",className:"not-link",onClick:this.onGoToPublic},r.a.createElement(w.Button,{stretched:!0,size:"xl",style:{marginTop:"15px"}},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438"))))))}}]),t}(r.a.Component));function ge(){return Se.apply(this,arguments)}function Se(){return(Se=Object(y.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("VKWebAppGetUserInfo");case 2:return e.abrupt("return",e.sent.first_name);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ce(){window.history.back()}var be=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={activeView:"start",username:""},window.history.replaceState({},"","#start"),n.setGlobalHistoryStateHandler(),n}return Object(k.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){var e=Object(y.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.send("VKWebAppInit",{}),this.setOnPopStateEventHandler(),e.next=4,ge();case 4:t=e.sent,this.setUserName(t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onPopHistoryState",value:function(){var e=function(e){return e.slice(1).split("/",1)[0]}(window.location.hash);this.changeView(e)}},{key:"setOnPopStateEventHandler",value:function(){var e=this;window.onpopstate=window.basePopHistoryStateHandler||function(){return e.onPopHistoryState()}}},{key:"setGlobalHistoryStateHandler",value:function(){var e=this;window.basePopHistoryStateHandler=function(){return e.onPopHistoryState()}}},{key:"setUserName",value:function(e){this.setState({username:e})}},{key:"changeView",value:function(e){this.setState({activeView:e})}},{key:"goHome",value:function(){this.changeViewAndPushHistoryItem("home")}},{key:"goToThankYouView",value:function(){this.changeViewAndPushHistoryItem("thank-you")}},{key:"goToSendRequest",value:function(){this.changeViewAndPushHistoryItem("sendRequest")}},{key:"changeViewAndPushHistoryItem",value:function(e){var t;t="#".concat(e),window.history.pushState({},"",t),this.changeView(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.activeView;return r.a.createElement(ye,null,r.a.createElement(w.Root,{activeView:a},r.a.createElement(ie,{id:"home",onCtaClick:function(){return e.goToSendRequest()},onBack:function(){return Ce()}}),r.a.createElement(ve,{id:"sendRequest",onBack:function(){return Ce()},onSentRequest:function(){return e.goToThankYouView()},username:n}),r.a.createElement(ke,{id:"start",onGoHome:function(){return e.goHome()},username:n}),r.a.createElement(we,{id:"thank-you",onBack:function(){return Ce()}})))}}]),t}(a.Component);function xe(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));U&&(d.a.config("https://e1f809f399e2427898e1796a4a4d8c64@sentry.io/1280607").install(),function(e,t,n){(t[n]=t[n]||[]).push(function(){try{t.yaCounter50376901=new Ya.Metrika2({id:50376901,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})}catch(e){}});var a=e.getElementsByTagName("script")[0],r=e.createElement("script"),i=function(){a.parentNode.insertBefore(r,a)};r.type="text/javascript",r.async=!0,r.src="https://mc.yandex.ru/metrika/tag.js","[object Opera]"==t.opera?e.addEventListener("DOMContentLoaded",i,!1):i()}(document,window,"yandex_metrika_callbacks2"),document.body.innerHTML+=D);var Pe,Ae=document.getElementById("root");u.send("VKWebAppInit",{}),Pe=be,o.a.render(r.a.createElement(c.AppContainer,null,r.a.createElement(Pe,null)),Ae),function(){if("serviceWorker"in navigator){if(new URL("/ticalc",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/ticalc","/service-worker.js");Re?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):xe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):xe(e)})}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.eaa6b4db.chunk.js.map