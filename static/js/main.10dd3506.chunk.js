(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){e.exports=n.p+"static/media/logo.4d10b61e.png"},40:function(e,t){e.exports="data:image/png;base64,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"},43:function(e,t,n){e.exports=n(95)},71:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),c=n(41),s=n(15),u=n.n(s),l=n(18),d=n.n(l),h=n(2),p=n.n(h),m=n(4),v=n(5),f=n(7),E=n(6),y=n(8),w=n(9),k=n(1),S=(n(29),n(19)),g=n(17),C=n(25),b=n.n(C),A=n(35),P=n.n(A);var R=function(){return Object(k.platform)()===k.IOS?r.a.createElement(P.a,null):r.a.createElement(b.a,null)};function x(e){var t=e.panelHeaderProps,n=e.onBackButtonClick,a=e.text;return r.a.createElement(k.PanelHeader,Object.assign({},t,{left:r.a.createElement(k.HeaderButton,{onClick:n},r.a.createElement(R,null))}),a)}function O(e,t){var n=t.shouldLowerCase,a=e.trimLeft();return n&&(a=a.toLowerCase()),a}x.defaultProps={panelHeaderProps:{}};var j=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).notFoundComponent=r.a.createElement(k.Div,{style:{textAlign:"center"}},r.a.createElement("p",null,"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")),n.state={searchText:""},n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"onSearchChange",value:function(e){var t=O(e,{shouldLowerCase:!1});this.setState({searchText:t})}},{key:"render",value:function(){var e=this,t=this.state.searchText,n=this.props,a=n.id,o=n.backClickHandler,i=n.header,c=n.onSelect;return r.a.createElement(k.Panel,{id:a},r.a.createElement(x,{onBackButtonClick:function(){return o()},text:i,panelHeaderProps:{noShadow:!0}}),r.a.createElement(k.Search,{onChange:function(t){return e.onSearchChange(t)},value:t,maxLength:35}),this.items.length>0&&r.a.createElement(k.List,null,this.items.map(function(e){return r.a.createElement(k.Cell,{key:e.id,onClick:function(){o(),c(e)}},e.value)})),!this.items.length&&this.notFoundComponent)}},{key:"items",get:function(){var e=this.state.searchText,t=this.props.items,n=O(e,{shouldLowerCase:!0});return t.filter(function(e){return O(e.value,{shouldLowerCase:!0}).includes(n)})}}]),t}(r.a.Component);n(71);function I(e){var t=e.text,n=e.value,a=e.additionalClassesAsStr;return r.a.createElement(N,{text:t,value:"".concat(n," \u0440\u0443\u0431"),additionalClassesAsStr:"money ".concat(a||"")})}function M(e){var t=e.text,n=e.value;return r.a.createElement(I,{text:t,value:n,additionalClassesAsStr:"summary"})}function N(e){var t=e.text,n=e.value,a=e.onClick,o=e.additionalClassesAsStr;return r.a.createElement(k.Cell,{onClick:a&&function(){return a()}},r.a.createElement("div",{className:"indicator ".concat(o||"")},r.a.createElement("div",{className:"text-wrapper"},r.a.createElement("span",null,t)),r.a.createElement("div",{className:"value-wrapper"},r.a.createElement("span",{className:"value"},n))))}I.defaultProps={additionalClassesAsStr:""},N.defaultProps={onClick:function(){},additionalClassesAsStr:""};var T=n(26),V=n(20),H=n.n(V);function B(e){return Number.parseInt(e,10)||0}function L(e){return"---"===e?"":e}function G(e){var t={works:[],materials:[]};return e.forEach(function(e){var n=function(e){return{name:L(e.MATERIAL_NAME),price:B(e.MATERIAL_PRICE)}}(e);n.name&&t.materials.push(n);var a=function(e){return{name:L(e.SERVICE_NAME),price:B(e.SERVICE_PRICE)}}(e);a.name&&t.works.push(a)}),t}function q(e,t){return e.type===t}function z(e){return new Promise(function(t,n){u.a.subscribe(function a(r){u.a.unsubscribe(a);var o=r.detail;q(o,"".concat(e,"Result"))?t(o.data):q(o,"".concat(e,"Failed"))&&n(o.data)}),u.a.send(e,{})})}function D(e){return Object.entries(e).map(function(e){var t=Object(T.a)(e,2),n=t[0],a=t[1];return{id:parseInt(n,10),value:a}})}function W(e,t){var n=new URLSearchParams;return Object.entries(t).forEach(function(e){var t=Object(T.a)(e,2),a=t[0],r=t[1];n.append(a,r)}),H.a.post(e,n)}function U(e){return new Promise(function(t){setTimeout(t,1e3*e)})}var Y=Boolean(parseInt("0",10)),F='\n    <noscript>\n        <div><img src="https://mc.yandex.ru/watch/50376901" style="position:absolute; left:-9999px;" alt="" /></div>\n    </noscript>\n';function Q(e){if(Y)try{window.yaCounter50376901.reachGoal(e)}catch(t){console.warn("Tried to reach goal ".concat(e,", but Yandex.Metrika is blocked or removed"))}}var _={67223:"1.6\u043b., \u0431\u0435\u043d\u0437\u0438\u043d, 117 \u043b.\u0441., CVT",67271:"1.6\u043b., \u0442\u0443\u0440\u0431\u043e, \u0431\u0435\u043d\u0437\u0438\u043d, 200 \u043b.\u0441., 4\u04452 \u041c\u041a\u041f\u041f",67272:"1.6\u043b., \u0431\u0435\u043d\u0437\u0438\u043d, 117 \u043b.\u0441., \u041c\u041a\u041f\u041f",67273:"1.6\u043b., \u0442\u0443\u0440\u0431\u043e, \u0431\u0435\u043d\u0437\u0438\u043d, 200 \u043b.\u0441., 4\u04454 CVT"},J=[{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u043c\u043e\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u043c\u0430\u0441\u043b\u0430 (\u0431\u0435\u0437 \u0441\u043d\u044f\u0442\u0438\u044f \u0437\u0430\u0449\u0438\u0442\u044b \u0414\u0412\u0421)",SERVICE_PRICE:"600",MATERIAL_NAME:"\u041c\u043e\u0442\u043e\u0440\u043d\u043e\u0435 \u043c\u0430\u0441\u043b\u043e 5\u043b.",MATERIAL_PRICE:"2250"},{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u043c\u0430\u0441\u043b\u044f\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430 (\u0431\u0435\u0437 \u0441\u043d\u044f\u0442\u0438\u044f \u0437\u0430\u0449\u0438\u0442\u044b \u0414\u0412\u0421)",SERVICE_PRICE:"---",MATERIAL_NAME:"\u041c\u0430\u0441\u043b\u044f\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440",MATERIAL_PRICE:"450"},{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u043f\u0440\u043e\u043a\u043b\u0430\u0434\u043a\u0438 \u0441\u043b\u0438\u0432\u043d\u043e\u0439 \u043f\u0440\u043e\u0431\u043a\u0438",SERVICE_PRICE:"---",MATERIAL_NAME:"\u041f\u0440\u043e\u043a\u043b\u0430\u0434\u043a\u0430 \u0441\u043b\u0438\u0432\u043d\u043e\u0439 \u043f\u0440\u043e\u0431\u043a\u0438",MATERIAL_PRICE:"50"},{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u0432\u043e\u0437\u0434\u0443\u0448\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430",SERVICE_PRICE:"300",MATERIAL_NAME:"\u0412\u043e\u0437\u0434\u0443\u0448\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440",MATERIAL_PRICE:"450"},{SERVICE_NAME:"\u0417\u0430\u043c\u0435\u043d\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u0438 \u0441\u0430\u043b\u043e\u043d\u0430",SERVICE_PRICE:"400",MATERIAL_NAME:"\u0424\u0438\u043b\u044c\u0442\u0440 \u0432\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u0438 \u0441\u0430\u043b\u043e\u043d\u0430",MATERIAL_PRICE:"400"},{SERVICE_NAME:"C\u043c\u0430\u0437\u043a\u0430 \u043f\u0435\u0442\u0435\u043b\u044c, \u0437\u0430\u043c\u043a\u043e\u0432",SERVICE_PRICE:"100",MATERIAL_NAME:"---",MATERIAL_PRICE:"---"},{SERVICE_NAME:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 (\u0432\u0441\u0435\u0445 \u0441\u0438\u0441\u0442\u0435\u043c, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u043d\u0443\u044e, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u0440\u043e\u0441\u0441\u0435\u043b\u044c\u043d\u043e\u0439 \u0437\u0430\u0441\u043b\u043e\u043d\u043a\u0438)",SERVICE_PRICE:"1490",MATERIAL_NAME:"---",MATERIAL_PRICE:"---"}],X=[{id:43,value:"Almera Classic (2006-2013)"},{id:44,value:"Almera New (\u0441 2012)"},{id:45,value:"Juke (\u0441 2011)"},{id:46,value:"Micra (\u0441 2002)"},{id:47,value:"Murano (2008-2015)"},{id:48,value:"Murano (\u0441 2015)"},{id:49,value:"Navara (\u0441 2010)"},{id:50,value:"Note (2006-2014)"},{id:51,value:"Pathfinder (2010-2013)"},{id:52,value:"Pathfinder (\u0441 2013)"},{id:53,value:"Qashqai (2006-2013)"},{id:54,value:"Qashqai (\u0441 2013)"},{id:55,value:"Teana (2008-2013)"},{id:56,value:"Teana (\u0441 2013)"},{id:57,value:"Terrano (\u0441 2013)"},{id:58,value:"Tiida (2004-2015)"},{id:60,value:"X-Trail (2010-2014)"},{id:61,value:"X-Trail (\u0441 2014)"},{id:62,value:"Sentra (\u0441 2014)"}],K=[{id:1,value:"15000 \u0438\u043b\u0438 1 \u0433\u043e\u0434"},{id:2,value:"30000 \u0438\u043b\u0438 2 \u0433\u043e\u0434\u0430"},{id:3,value:"45000 \u0438\u043b\u0438 3 \u0433\u043e\u0434\u0430"},{id:4,value:"60000 \u0438\u043b\u0438 4 \u0433\u043e\u0434\u0430"},{id:5,value:"75000 \u0438\u043b\u0438 5 \u043b\u0435\u0442"},{id:6,value:"90000 \u0438\u043b\u0438 6 \u043b\u0435\u0442"},{id:7,value:"105000 \u0438\u043b\u0438 7 \u043b\u0435\u0442"},{id:8,value:"120000 \u0438\u043b\u0438 8 \u043b\u0435\u0442"},{id:9,value:"135000 \u0438\u043b\u0438 9 \u043b\u0435\u0442"},{id:10,value:"150000 \u0438\u043b\u0438 10 \u043b\u0435\u0442"}],Z=n(36),$=n.n(Z);var ee=function(e){var t=[{title:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437",action:e.onRetry},{title:"\u041e\u0442\u043c\u0435\u043d\u0430",action:e.onCancel,style:"cancel"}];return r.a.createElement(k.Alert,{actions:t,actionsLayout:"vertical"},r.a.createElement($.a,{style:{color:"red",margin:"0 auto"}}),r.a.createElement("p",null,"\u0423\u043f\u0441, \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u0435\u0442\u044c\u044e. \u0421\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e \u0412\u044b \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443."),r.a.createElement("span",null,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u0441\u044c \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443 \u0435\u0449\u0435 \u0440\u0430\u0437"))};var te,ne=Object(g.a)({calculationResults:{status:"notSelected",works:[],materials:[]},popout:null,modifications:[]},{model:{id:0,text:te="\u0412\u044b\u0431\u0440\u0430\u0442\u044c"},modification:{id:0,text:te},oldness:{id:0,text:te}});function ae(){window.history.back()}function re(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(w.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=4;break}return e.next=3,W("/ajax/model.php",{ID:t});case 3:return e.abrupt("return",e.sent.data);case 4:return e.next=6,U(.2);case 6:return e.abrupt("return",_);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ie(e,t,n){return ce.apply(this,arguments)}function ce(){return(ce=Object(w.a)(p.a.mark(function e(t,n,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=4;break}return e.next=3,W("/ajax/to.php",{SECTION:t,TIME:a,AUTO:n});case 3:return e.abrupt("return",e.sent.data);case 4:return e.next=6,U(.5);case 6:return e.abrupt("return",J);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var se=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).ctaText="\u041e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u044f\u0432\u043a\u0443, \u043d\u0430\u0448\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u0441\u0432\u044f\u0436\u0443\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0434\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0438 \u043d\u0430 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f Nissan",n.models=X,n.oldnesses=K,n.headerText="\u0420\u0430\u0441\u0447\u0435\u0442 \u0422\u041e \u041d\u0438\u0441\u0441\u0430\u043d",n.onCtaClick=function(){var e=n.props.onCtaClick;Q("open-send-request"),e()},n.ctaButton=r.a.createElement(k.Button,{stretched:!0,size:"xl",onClick:n.onCtaClick},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"),n.ctaComponent=r.a.createElement(k.Div,null,r.a.createElement("p",null,n.ctaText),n.ctaButton),n.getPanelHeader=function(){var e=n.props.onBack;return r.a.createElement(x,{text:n.headerText,onBackButtonClick:function(){return e()}})},n.onModelSelect=function(){var e=Object(w.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.showSpinner(),Q("selected-model"),n.resetModification(),e.prev=3,e.next=6,n.setModifications(t.id);case 6:return e.next=8,U(.8);case 8:n.removeAnyPopout(),n.changePanelAndPushHistoryState("chooseModification"),n.setSelectValueAndTryToCalculateResults("model",t),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.showNetworkErrorAlert(function(){return n.onModelSelect(t)});case 16:case"end":return e.stop()}},e,null,[[3,13]])}));return function(t){return e.apply(this,arguments)}}(),n.onModificationSelect=function(){var e=Object(w.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Q("selected-modification"),n.setSelectValueAndTryToCalculateResults("modification",t),n.getSelectedOldnessId()){e.next=8;break}return n.showSpinner(),e.next=6,U(.8);case 6:n.removeAnyPopout(),n.changePanelAndPushHistoryState("chooseOldness");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state=ne;var a=n.props.id;return ne.activePanel="".concat(a,"main"),window.onpopstate=function(){return n.onPopHistoryState()},window.history.replaceState({},"","#".concat(a,"/").concat(a,"main")),n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(g.a)({},ne))}},{key:"componentWillUnmount",value:function(){ne=this.state;var e=this.state,t=e.calculationResults,n=e.model,a=e.modification,r=e.oldness;window.onpopstate=window.basePopHistoryStateHandler,window.calculationResults=t,window.input={model:n,modification:a,oldness:r}}},{key:"onPopHistoryState",value:function(){var e=window.location.hash;e.includes("home")?this.viewPopStateHandler():window.basePopHistoryStateHandler()}},{key:"getModelSelectIndicator",value:function(){var e=this,t=this.state.model;return r.a.createElement(N,{text:"\u041c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e",value:t.text,onClick:function(){return e.changePanelAndPushHistoryState("chooseModel")}})}},{key:"getModificationSelectIndicator",value:function(){var e=this,t=this.state.modification;return r.a.createElement(N,{text:"\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f",value:t.text,onClick:function(){return e.changePanelAndPushHistoryState("chooseModification")}})}},{key:"getOldnessSelectIndicator",value:function(){var e=this,t=this.state.oldness;return r.a.createElement(N,{text:"\u041f\u0440\u043e\u0431\u0435\u0433 \u0438\u043b\u0438 \u0432\u0440\u0435\u043c\u044f",value:t.text,onClick:function(){return e.changePanelAndPushHistoryState("chooseOldness")}})}},{key:"getSelectIndicatorList",value:function(){return r.a.createElement(k.List,null,this.getModelSelectIndicator(),Boolean(this.getSelectedModificationId())&&this.getModificationSelectIndicator(),this.getOldnessSelectIndicator())}},{key:"getCalculationSelectGroup",value:function(){return r.a.createElement(k.Group,null,r.a.createElement(k.Header,null,"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0432\u0430\u0448\u0435\u0433\u043e Nissan:"),this.getSelectIndicatorList())}},{key:"getResultWorkGroup",value:function(){var e=this.state.calculationResults;return r.a.createElement(k.Group,{title:"\u0420\u0430\u0431\u043e\u0442\u044b"},e.works.map(function(e){var t=e.name,n=e.price;return r.a.createElement(I,{text:t,value:n,key:t})}),r.a.createElement(M,{text:"\u0412\u0441\u0435\u0433\u043e \u043f\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043c",value:this.getSummaryValue("works")}))}},{key:"getResultMaterialGroup",value:function(){var e=this.state.calculationResults;return r.a.createElement(k.Group,{title:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"},e.materials.map(function(e){var t=e.name,n=e.price;return r.a.createElement(I,{text:t,value:n,key:t})}),r.a.createElement(M,{text:"\u0412\u0441\u0435\u0433\u043e \u043f\u043e \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c",value:this.getSummaryValue("materials")}))}},{key:"getSummaryValue",value:function(e){return this.state.calculationResults[e].reduce(function(e,t){return e+t.price},0)}},{key:"getResultSummaryGroup",value:function(){return r.a.createElement(k.Group,null,r.a.createElement(M,{text:"\u0418\u0442\u043e\u0433\u043e",value:this.getSummaryValue("works")+this.getSummaryValue("materials")}))}},{key:"getCalculationResultGroups",value:function(){return r.a.createElement("div",null,"ready"===this.resultsStatus&&r.a.createElement("div",null,this.getResultWorkGroup(),this.getResultMaterialGroup(),this.getResultSummaryGroup()))}},{key:"setSelectValueAndTryToCalculateResults",value:function(e,t){this.setState(Object(S.a)({},e,function(e){return{id:e.id,text:e.value}}(t)),this.tryToCalculateResults)}},{key:"getSelectedOldnessId",value:function(){return this.state.oldness.id}},{key:"getSelectedModificationId",value:function(){return this.state.modification.id}},{key:"getSelectedModelId",value:function(){return this.state.model.id}},{key:"getCalculationResults",value:function(){if("notSelected"===this.resultsStatus)return null;if("ready"===this.resultsStatus)return this.getCalculationResultGroups();throw new Error("invalid resultsStatus")}},{key:"setModifications",value:function(){var e=Object(w.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t);case 2:n=D(n=e.sent),this.setState({modifications:n});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setCalculationResults",value:function(e){this.removeAnyPopout(),this.setState({calculationResults:Object(g.a)({status:"ready"},e)})}},{key:"removeAnyPopout",value:function(){this.setState({popout:null})}},{key:"showSpinner",value:function(){this.setState({popout:r.a.createElement(k.ScreenSpinner,null)})}},{key:"allSelected",value:function(){return this.getSelectedModelId()&&this.getSelectedModificationId()&&this.getSelectedOldnessId()}},{key:"changePanel",value:function(e){this.setState({activePanel:e})}},{key:"calculateResults",value:function(){var e=Object(w.a)(p.a.mark(function e(){var t,n,a,r,o,i=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.model,a=t.modification,r=t.oldness,this.showSpinner(),e.prev=2,e.next=5,ie(n.id,a.id,r.id);case 5:o=G(o=e.sent),this.setCalculationResults(o),this.removeAnyPopout(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.showNetworkErrorAlert(function(){return i.calculateResults()});case 14:case"end":return e.stop()}},e,this,[[2,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"tryToCalculateResults",value:function(){var e=Object(w.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.allSelected()){e.next=3;break}return e.next=3,this.calculateResults();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetModification",value:function(){this.setState({modification:{id:0,text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"}})}},{key:"changePanelAndPushHistoryState",value:function(e){var t;t="#home/".concat(e),window.history.pushState({},"",t),this.changePanel(e)}},{key:"viewPopStateHandler",value:function(){var e=window.location.hash,t=e.split("/",2)[1];this.changePanel(t)}},{key:"showNetworkErrorAlert",value:function(e){var t=this;this.setState({popout:r.a.createElement(ee,{onRetry:function(){t.removeAnyPopout(),e()},onCancel:function(){return t.removeAnyPopout()}})})}},{key:"render",value:function(){var e=this,t=this.props.id,n=this.state,a=n.activePanel,o=n.popout,i=n.modifications,c="".concat(t,"main");return r.a.createElement(k.View,{id:t,activePanel:a,header:!0,popout:o},r.a.createElement(k.Panel,{id:c},this.getPanelHeader(),this.getCalculationSelectGroup(),this.getCalculationResults(),this.ctaComponent),r.a.createElement(j,{id:"chooseModel",backClickHandler:function(){return ae()},header:"\u041c\u043e\u0434\u0435\u043b\u044c",items:this.models,onSelect:this.onModelSelect}),r.a.createElement(j,{id:"chooseModification",backClickHandler:function(){return ae()},header:"\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f",items:i,onSelect:this.onModificationSelect}),r.a.createElement(j,{id:"chooseOldness",backClickHandler:function(){return ae()},header:"\u041f\u0440\u043e\u0431\u0435\u0433 \u0438\u043b\u0438 \u0432\u0440\u0435\u043c\u044f",items:this.oldnesses,onSelect:function(t){Q("selected-oldness"),e.setSelectValueAndTryToCalculateResults("oldness",t)}}))}},{key:"resultsStatus",get:function(){return this.state.calculationResults.status}}]),t}(r.a.Component);function ue(e){var t=e.onChange,n=e.value,a=function(e){return t(e.replace(/[^A-Za-z\u0410-\u042fa-\u044f ]/g,"").replace(/ {2,}/," ").trimLeft())};return r.a.createElement(k.Input,{type:"text",placeholder:"\u0418\u0432\u0430\u043d",onChange:function(e){return a(e.target.value)},value:n||"",maxLength:"35"})}ue.defaultProps={value:""};var le=ue,de=n(42);function he(e){var t=e;return t.startsWith("+")||""===t||(t="+".concat(t)),new de.a("RU").input(t)}function pe(e){return e.replace(/[^0-9]/g,"")}var me={value:"",requestedPhone:!1},ve=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).state=me,n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.setState(me)}},{key:"componentWillUnmount",value:function(){me=this.state}},{key:"onChange",value:function(e){var t=e.target;this.changeValue(t.value)}},{key:"onClick",value:function(){var e=Object(w.a)(p.a.mark(function e(){var t,n,a,r,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.shouldRequestPhone,a=t.onPhoneRequest,!n){e.next=8;break}return a&&a(),e.next=5,z("VKWebAppGetPhoneNumber");case 5:r=e.sent,o=r.phone_number,this.changeValue("+".concat(o));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeValue",value:function(e){var t=this.props.onChange;if(function(e){var t=pe(e);return t.startsWith("375")?t.length<=12:t.length<=11}(e)){var n=he(e);this.setState({value:n}),t(function(e){return"+".concat(pe(e))}(e))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.placeholder,o=this.state.value;return r.a.createElement(k.Input,{type:"tel",placeholder:he(a),onChange:function(t){return e.onChange(t)},value:o,className:n,onClick:function(t){return e.onClick(t)}})}}]),t}(r.a.Component);ve.defaultProps={placeholder:"",className:"",shouldRequestPhone:!1,onPhoneRequest:function(){}};var fe=ve,Ee={name:"",phone:"",phoneNotValid:!1,shouldRequestPhone:!0};function ye(e){return function(e){return e.replace(/[^0-91]/g,"")}(e).length>=7}var we=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).onPhoneRequest=function(){n.setState({shouldRequestPhone:!1})};var a=n.props.initialName;return n.state=Object(g.a)({},Ee,{name:a}),n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(g.a)({},Ee,{shouldRequestPhone:!0}))}},{key:"componentWillUnmount",value:function(){Ee=this.state}},{key:"validateAndShowErrorsAndSendForm",value:function(){var e=Object(w.a)(p.a.mark(function e(){var t,n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.sendRequest,n=this.state,a=n.name,ye(r=n.phone)?t(a,r):this.setState({phoneNotValid:!0});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.phoneNotValid,o=t.shouldRequestPhone;return r.a.createElement(k.Group,null,r.a.createElement(k.FormLayout,null,r.a.createElement(le,{top:"\u0418\u043c\u044f",onChange:function(t){return e.setState({name:t})},value:n}),r.a.createElement(fe,{top:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",placeholder:"+79211234567",onChange:function(t){return e.setState({phoneNotValid:!1}),e.setState({phone:t})},bottom:a?"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d":"",status:a?"error":"default",shouldRequestPhone:o,onPhoneRequest:this.onPhoneRequest}),r.a.createElement(k.Button,{level:"commerce",size:"xl",onClick:function(){return e.validateAndShowErrorsAndSendForm()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443")))}}]),t}(a.Component);we.defaultProps={initialName:""};var ke=we;function Se(e){return"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"===e?"":e}function ge(e,t){var n={model:Se(window.input.model.text),modification:Se(window.input.modification.text),oldness:Se(window.input.oldness.text)},a=n.model,r=n.modification,o=n.oldness,i={works:JSON.stringify(window.calculationResults.works),materials:JSON.stringify(window.calculationResults.materials)},c=i.works,s=i.materials;return H.a.get("request.php",{params:{model:a,modification:r,oldness:o,works:c,materials:s,name:e,phone:t}})}var Ce=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).sendRequest=function(){var e=Object(w.a)(p.a.mark(function e(t,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.showSpinner(),e.prev=1,e.next=4,ge(t,a);case 4:Q("sent-manual-request"),n.doPostRequestTasks(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n.showNetworkErrorAlert(function(){return n.validateAndShowErrorsAndSendForm()});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}(),n.state={popout:null},n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.requestedPhone=!1}},{key:"doPostRequestTasks",value:function(){var e=this.props.onSentRequest;this.removeAnyPopout(),e()}},{key:"showNetworkErrorAlert",value:function(e){var t=this;this.setState({popout:r.a.createElement(ee,{onRetry:function(){t.removeAnyPopout(),e()},onCancel:function(){return t.removeAnyPopout()}})})}},{key:"removeAnyPopout",value:function(){this.setState({popout:null})}},{key:"showSpinner",value:function(){this.setState({popout:r.a.createElement(k.ScreenSpinner,null)})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.onBack,a=e.username,o=this.state.popout,i="".concat(t,"main");return r.a.createElement(k.View,{id:t,activePanel:i,header:!0,popout:o},r.a.createElement(k.Panel,{id:i},r.a.createElement(x,{onBackButtonClick:n,text:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"}),r.a.createElement(ke,{sendRequest:this.sendRequest,initialName:a})))}}]),t}(a.Component),be=n(38),Ae=n.n(be);n(91);var Pe=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).headerText="\u0420\u0430\u0441\u0447\u0435\u0442 \u0422\u041e \u041d\u0438\u0441\u0441\u0430\u043d \u0432 \u0421\u041f\u0431",n.onGoHome=function(){Q("open-home"),(0,n.props.onGoHome)()};var a=n.props.id;return n.state={activePanel:"".concat(a,"main")},n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"getText",value:function(){var e,t=this.props.username;return e=t?"".concat(t,", \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435"):"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435",e+=" \u0441\u0432\u043e\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c Nissan \u0438 \u0443\u0437\u043d\u0430\u0439\u0442\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u043f\u0440\u043e\u0431\u0435\u0433\u0443 \u0438\u043b\u0438 \u0433\u043e\u0434\u0443",r.a.createElement("p",null,e)}},{key:"getGreeting",value:function(){var e=this.props.username,t=e?"".concat("\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435",", ").concat(e,"!"):"".concat("\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435","!");return r.a.createElement("p",null,t," \u0412\u044b \u0438\u0437 \u0421\u041f\u0431, \u0438 \u0443 \u0432\u0430\u0441 \u041d\u0438\u0441\u0441\u0430\u043d?")}},{key:"render",value:function(){var e=this.props.id,t=this.state.activePanel,n="".concat(e,"main");return r.a.createElement(k.View,{id:e,activePanel:t},r.a.createElement(k.Panel,{id:n},r.a.createElement(k.PanelHeader,null,this.headerText),r.a.createElement(k.Group,null,r.a.createElement(k.Div,null,r.a.createElement("div",{className:"centerring-wrapper"},r.a.createElement("img",{src:Ae.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u042f \u0421\u0435\u0440\u0432\u0438\u0441"})),r.a.createElement("div",null,this.getGreeting(),this.getText()),r.a.createElement(k.Button,{stretched:!0,size:"xl",onClick:this.onGoHome},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0422\u041e")))))}}]),t}(r.a.Component),Re=n(39),xe=n.n(Re),Oe=n(40),je=n.n(Oe),Ie=(n(92),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={error:null},n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e}),d.a.captureException(e,{extra:t})}},{key:"render",value:function(){var e=this.state.error,t=this.props.children;return e?r.a.createElement("div",{className:"error-wrapper"},r.a.createElement("img",{src:je.a,alt:"\u041e\u0448\u0438\u0431\u043a\u0430!"}),r.a.createElement("h2",null,"\u041f\u043e\u0445\u043e\u0436\u0435, \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0441\u043b\u043e\u043c\u0430\u043b\u043e\u0441\u044c"),r.a.createElement("span",null,"\u041d\u0430\u0448\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0443\u0436\u0435 \u0437\u043d\u0430\u0435\u0442 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435"),r.a.createElement("span",null,"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435:"),r.a.createElement("ul",{className:"error-wrapper__list"},r.a.createElement("li",{className:"error-wrapper__three-dots-text-wrapper"},"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 ",r.a.createElement(xe.a,null)," \u0432 \u043f\u0440\u0430\u0432\u043e\u043c \u0432\u0435\u0440\u0445\u043d\u0435\u043c \u0443\u0433\u043b\u0443"),r.a.createElement("li",null,"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043f\u0443\u043d\u043a\u0442 \xab\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u044d\u0448\xbb"),r.a.createElement("li",null,"\u0418\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e"," ",r.a.createElement("a",{className:"error-wrapper__link",href:"https://vk.me/ya.service.nissan",target:"_blank",rel:"noreferrer noopener"},"\u0440\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u043c \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435")))):t}}]),t}(r.a.Component)),Me=(n(93),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onGoToPublic=function(){return Q("open-vk-public"),!0},n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.onBack,a="".concat(t,"main");return r.a.createElement(k.View,{id:t,activePanel:a},r.a.createElement(k.Panel,{id:a},r.a.createElement(x,{onBackButtonClick:function(){return n()},text:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e"}),r.a.createElement(k.Group,null,r.a.createElement(k.Cell,{multiline:!0},r.a.createElement("div",null,"\u0421\u043f\u0430\u0441\u0438\u0431\u043e!"),r.a.createElement("div",null,"\u041d\u0430\u0448 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0412\u0430\u043c\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f.")),r.a.createElement(k.Cell,{multiline:!0},r.a.createElement("span",{className:"thank-you-view__visit-group-text"},"\u0410 \u043f\u043e\u043a\u0430 \u0437\u0430\u0439\u0434\u0438\u0442\u0435 \u0432 \u043d\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"),r.a.createElement(k.Button,{component:"a",href:"//vk.com/ya.service.nissan",target:"_blank",rel:"noopener noreferrer",onClick:this.onGoToPublic,level:"commerce",stretched:!0,size:"xl",style:{marginTop:"15px"}},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438")))))}}]),t}(r.a.Component));function Ne(){return Te.apply(this,arguments)}function Te(){return(Te=Object(w.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("VKWebAppGetUserInfo");case 2:return e.abrupt("return",e.sent.first_name);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ve(){window.history.back()}var He=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={activeView:"start",username:""},window.history.replaceState({},"","#start"),n.setGlobalHistoryStateHandler(),n}return Object(y.a)(t,e),Object(v.a)(t,[{key:"componentWillMount",value:function(){var e=Object(w.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.send("VKWebAppInit",{}),this.setOnPopStateEventHandler(),e.next=4,Ne();case 4:t=e.sent,this.setUserName(t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onPopHistoryState",value:function(){var e=function(e){return e.slice(1).split("/",1)[0]}(window.location.hash);this.changeView(e)}},{key:"setOnPopStateEventHandler",value:function(){var e=this;window.onpopstate=window.basePopHistoryStateHandler||function(){return e.onPopHistoryState()}}},{key:"setGlobalHistoryStateHandler",value:function(){var e=this;window.basePopHistoryStateHandler=function(){return e.onPopHistoryState()}}},{key:"setUserName",value:function(e){this.setState({username:e})}},{key:"changeView",value:function(e){this.setState({activeView:e})}},{key:"goHome",value:function(){this.changeViewAndPushHistoryItem("home")}},{key:"goToThankYouView",value:function(){this.changeViewAndPushHistoryItem("thank-you")}},{key:"goToSendRequest",value:function(){this.changeViewAndPushHistoryItem("sendRequest")}},{key:"changeViewAndPushHistoryItem",value:function(e){var t;t="#".concat(e),window.history.pushState({},"",t),this.changeView(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.activeView;return r.a.createElement(Ie,null,r.a.createElement(k.Root,{activeView:a},r.a.createElement(se,{id:"home",onCtaClick:function(){return e.goToSendRequest()},onBack:function(){return Ve()}}),r.a.createElement(Ce,{id:"sendRequest",onBack:function(){return Ve()},onSentRequest:function(){return e.goToThankYouView()},username:n}),r.a.createElement(Pe,{id:"start",onGoHome:function(){return e.goHome()},username:n}),r.a.createElement(Me,{id:"thank-you",onBack:function(){return Ve()}})))}}]),t}(a.Component);function Be(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Y&&(d.a.config("https://e1f809f399e2427898e1796a4a4d8c64@sentry.io/1280607").install(),function(e,t,n){(t[n]=t[n]||[]).push(function(){try{t.yaCounter50376901=new Ya.Metrika2({id:50376901,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})}catch(e){}});var a=e.getElementsByTagName("script")[0],r=e.createElement("script"),o=function(){a.parentNode.insertBefore(r,a)};r.type="text/javascript",r.async=!0,r.src="https://mc.yandex.ru/metrika/tag.js","[object Opera]"==t.opera?e.addEventListener("DOMContentLoaded",o,!1):o()}(document,window,"yandex_metrika_callbacks2"),document.body.innerHTML+=F);var Ge,qe=document.getElementById("root");s.send("VKWebAppInit",{}),Ge=He,i.a.render(r.a.createElement(c.AppContainer,null,r.a.createElement(Ge,null)),qe),function(){if("serviceWorker"in navigator){if(new URL("/ticalc",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/ticalc","/service-worker.js");Le?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Be(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Be(e)})}}()}},[[43,1,2]]]);
//# sourceMappingURL=main.10dd3506.chunk.js.map